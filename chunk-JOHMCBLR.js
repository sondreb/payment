import{$a as O,Bb as $,Db as z,Eb as F,Fb as U,Ga as m,Ia as P,La as l,Na as S,Oa as k,Pa as i,Qa as o,Ra as M,Sa as u,Ta as x,Ua as s,Va as w,Y as d,Za as a,_a as g,ab as H,ba as f,ca as C,gb as p,hb as v,ib as E,ma as h,pa as r,ua as b,vb as I,wb as T,xb as V}from"./chunk-C5TJY7WL.js";var R=(e,n)=>n.id;function q(e,n){if(e&1&&(i(0,"div",8),a(1," Transaction: "),i(2,"a",12),a(3),o()()),e&2){let t=s().$implicit;r(2),w("href","https://stellar.expert/explorer/public/tx/",t.transactionId,"",h),r(),g(t.transactionId)}}function B(e,n){e&1&&(i(0,"div",10)(1,"span",13),a(2,"\u2713"),o()())}function L(e,n){if(e&1){let t=u();M(0,"qrcode",14),i(1,"div",10)(2,"button",15),x("click",function(){f(t);let c=s().$implicit,y=s(2);return C(y.checkPaymentStatus(c))}),a(3," Check Status "),o()()}if(e&2){let t=s().$implicit;P("qrdata",t.paymentUrl)("width",128)("errorCorrectionLevel","M")}}function N(e,n){if(e&1){let t=u();i(0,"div",3)(1,"div",4)(2,"div",5),a(3),o(),i(4,"div",6),a(5),p(6,"date"),o(),i(7,"div",7),a(8),o(),m(9,q,4,3,"div",8),o(),i(10,"div",9),m(11,B,3,0,"div",10)(12,L,4,3),i(13,"button",11),x("click",function(){let c=f(t).$implicit,y=s(2);return C(y.copyPaymentUrl(c.paymentUrl))}),a(14,"Copy Payment URL"),o()()()}if(e&2){let t=n.$implicit;r(3),H("",t.amount," ",t.assetCode,""),r(2),g(E(6,6,t.timestamp,"medium")),r(3),O("To: ",t.destination,""),r(),l(t.transactionId?9:-1),r(2),l(t.isPaid?11:12)}}function j(e,n){if(e&1&&(i(0,"div",1),S(1,N,15,9,"div",3,R),p(3,"async"),o()),e&2){let t=s();r(),k(v(3,0,t.history$))}}function A(e,n){e&1&&(i(0,"div",2),a(1," No payment history available "),o())}var D=class e{historyService=d(F);paymentValidator=d(U);clipboard=d($);history$=this.historyService.getHistory();copyPaymentUrl(n){this.clipboard.copy(n)}checkPaymentStatus(n){this.paymentValidator.startValidation({memo:n.memo,expectedAmount:n.amount,assetCode:n.assetCode,destination:n.destination}),this.paymentValidator.validationStatus$.subscribe(t=>{t?.isPaid&&this.historyService.updatePaymentStatus(n.memo,!0,t.transactionId)})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-history"]],decls:6,vars:3,consts:[[1,"history-container"],[1,"history-list"],[1,"empty-state"],[1,"payment-card"],[1,"payment-info"],[1,"amount"],[1,"timestamp"],[1,"destination"],[1,"transaction-id"],[1,"payment-actions"],[1,"payment-status"],[3,"click"],["target","_blank",3,"href"],[1,"status-icon","success","large"],[3,"qrdata","width","errorCorrectionLevel"],[1,"check-status-btn",3,"click"]],template:function(t,_){if(t&1&&(i(0,"div",0)(1,"h1"),a(2,"Payment History"),o(),m(3,j,4,2,"div",1),p(4,"async"),m(5,A,2,0,"div",2),o()),t&2){let c;r(3),l((c=v(4,1,_.history$))!=null&&c.length?3:5)}},dependencies:[V,I,T,z],styles:[".history-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.payment-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 4px 6px -1px #0000001a;display:flex;justify-content:space-between;align-items:center;transition:all .2s}.payment-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px -1px #0000001a}.amount[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#2c3e50;margin-bottom:.5rem}.timestamp[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;margin:.5rem 0}.destination[_ngcontent-%COMP%]{font-family:monospace;word-break:break-all;background:#f8f9fa;padding:.5rem;border-radius:8px;font-size:.875rem}.transaction-id[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.75rem}.transaction-id[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;padding:.25rem .5rem;background:#f3f4f6;border-radius:4px;transition:all .2s}.transaction-id[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#e5e7eb;text-decoration:none}.status-icon.success[_ngcontent-%COMP%]{color:#10b981;font-size:2rem}.status-icon.success.large[_ngcontent-%COMP%]{font-size:4rem;margin:1rem 0;animation:_ngcontent-%COMP%_scaleIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0) rotate(-45deg);opacity:0}60%{transform:scale(1.2) rotate(10deg)}to{transform:scale(1) rotate(0);opacity:1}}"]})};export{D as HistoryComponent};
